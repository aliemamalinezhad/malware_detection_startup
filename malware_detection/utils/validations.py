from db_helper import connectiondb
from flask import Blueprint, render_template,request,flash

import re




def valid_username(username):
    user = connectiondb('users').find_one({'name': request.form['username']})
    user_list = []
    if len(username) > 24 or len(username) < 3:
        username_message = 'Username value out of range(3-24)'
        flag = False

    elif user:
        username_message = "That username is taken. Please choose another username"
        flag = False
    else:
        username_message = "That is a valid username."
        flag = True
    user_list.append(username_message)
    user_list.append(flag)
    result = tuple(user_list)
    return result


def validate_email(email):
    res = []
    EMAIL_REGEX = re.compile(r"(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$)")

    if not EMAIL_REGEX.match(email):
        message = "Email is not valid!"
        flag = False
    else:
        message = "Email is valid"
        flag = True

    res.append(message)
    res.append(flag)
    result = tuple(res)
    return result
