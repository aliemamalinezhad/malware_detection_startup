<!DOCTYPE html>
<html>

<head>

    <link rel="stylesheet" href="/static/css/bootstrap.min.css">

    <link rel="stylesheet" href="/static/css/dataTables.min.css">

  <link rel="stylesheet" href="/static/css/detail.css">
  

</head>

<body>
    <script src="/static/js/bootstrap.min.js"></script> 

    <script src="/static/js/jquery-3.4.1.min.js"></script> 
        <script src="/static/js/dataTables.min.js"></script> 

    <script src="/static/js/func.js"></script> 
  <div>
      {% include "_navbar.htm" %}
    </div>
  <div class="container j">
    <div >
      <!-- class ="pane" -->
      
      <table class="table" id="table" >
          <thead class="thead-light">
            <tr>
              
              <th scope="col" id="scantime">ScanTime</th>
              <th scope="col" id="filename">Filename</th>
              <th scope="col">FileHash</th>
              <th scope="col" id="scanresult">ScanResult</th>
  
            </tr>
          </thead>
          <tbody>
            {% for d in data %}
             <tr>
                <td> {{ d['scan_time'] }} </td>
  
                <td> {{ d['filename'] }} </td>
  
                <td> {{ d['file_hash'] }} </td>
  
  
                 <td> {{ d['scann_result'] }} </td>
             </tr>
          {% endfor %}
          </tbody>
        </table>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="container">
      <div class="column">
          <canvas class="size" id="myChart" ></canvas>
          <canvas class="size" id="mybar" ></canvas>
      </div>
    </div>
     
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


<script>
  

//var ctx = document.getElementById('myChart').getContext('2d');


var data = [{{mal}},{{leg}}]
 //data = [{x:'2016-12-25', y:20}, {x:'2016-12-26', y:10}];

 var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Malicious', 'Legitimate'],
        datasets: [{
          label: 'The distribution of Malicious and Legitimate files.',
            data: data,
            backgroundColor: [
                'rgba(255, 99, 132, 0.5)',
                'rgba(54, 162, 235, 0.5)',
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});



var ctx = document.getElementById('mybar').getContext('2d');
var myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Malicious', 'Legitimate'],
        datasets: [{
            label: '# of files',
            data: data,
            backgroundColor: [
                'rgba(255, 99, 132, 0.5)',
                'rgba(54, 162, 235, 0.5)',
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});

//  new Chart(document.getElementById("myChart"),{
//    type:"bar",
//    data:{
//      labels:["Malicious","Legitimate"],
//      datasets:[{"data":data}],
//      fill:false,
//      backgroundColor:[
//        'blue',
//        'red'
//        ],
//      borderColor:["rgb(255, 99, 132)","rgb(255, 159, 64)"],
//      borderWidth:1,
//      options:{"scales":{"yAxes":[{"ticks":{"beginAtZero":true}}]}}
//     }})


    // new Chart(document.getElementById("mybar"),{
    // type: 'doughnut',
    // "data":{
    //  "labels":["malicious","legitimate"],
    //  "datasets":[{"data":data}],
    //  "fill":false,
    //  "backgroundColor": [
    //       "#f38b4a",
    //       "#56d798",
    //       "#ff8397",
    //       "#6970d5" 
    //     ],
    //  "borderColor":["rgb(255, 99, 132)","rgb(255, 159, 64)"],
    // }})

  
</script>

</body>

</html>